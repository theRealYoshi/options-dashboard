<!-- views/dashboard -->
<%

    var marginAccountHtml = '<ul>';
    Object.keys(marginAccount['btc']).forEach(function(key) {
        marginAccountHtml += '<li>' + key + ':' + marginAccount['btc'][key] + '</li>';
        marginAccountHtml += '<li>' + key + ':' + marginAccount['dollar'][key] + '</li>';
    });
    marginAccountHtml += '</ul>';

    var currentMarginPositionsHtml = '<ul>';
    Object.keys(currentMarginPositions).forEach(function(currencyPairs) {
        var marginPositionObj = currentMarginPositions[currencyPairs];

        currentMarginPositionsHtml += '<li>' + currencyPairs + '</li>';
        Object.keys(marginPositionObj['btc']).forEach(function(currencyPairKey) {

            currentMarginPositionsHtml += '<li>' + currencyPairKey + ' : ' +
                                                   marginPositionObj['btc'][currencyPairKey] +
                                          '</li>';
        });
        Object.keys(marginPositionObj['dollar']).forEach(function(currencyPairKey) {
            currentMarginPositionsHtml += '<li>' + currencyPairKey + ' : ' +
                                                   marginPositionObj['dollar'][currencyPairKey] +
                                          '</li>';
        });
    });
    currentMarginPositionsHtml += '</ul>';

    var currentOpenOrdersHtml = '<ul>';
    Object.keys(currentOpenOrders).forEach(function(key) {
        currentOpenOrdersHtml += '<li>' + key + '</li>';
        var currencyPairObj = currentOpenOrders[key];
        Object.keys(currencyPairObj).forEach(function(orderNumber) {
            currentOpenOrdersHtml += '<li>' + orderNumber + '</li>';
            Object.keys(currencyPairObj[orderNumber]).forEach(function(orderKey) {
                var orderValue = currencyPairObj[orderNumber][orderKey];
                currentOpenOrdersHtml += '<li>' + orderKey + ' : ' + orderValue + '</li>';
            })
        })
    });
    currentOpenOrdersHtml += '</ul>';

%>
<!doctype html>
<html>
<head>
    <title>User Dashboard</title>
    <% include ../views/partials/css %>
    <style>
        body {
            padding-top:80px;
        }

        #title-container {
            text-align: center;
        }

        #dashboard-container {
            padding: 20px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="row" id="title-container">
        <h1>Currency Dashboard</h1>
    </div>
    <div class="row" id="dashboard-container">
        <div class="container" id="dashboard-rows">
            <div class="row">
                <h1> Margin Account Balance </h1>
                <%- marginAccountHtml %>
            </div>
            <div class="row">
                <h1> Current Margin Positions </h1>
                <%- currentMarginPositionsHtml %>
            </div>
            <div class="row">
                <h1> Current Open Orders </h1>
                <%- currentOpenOrdersHtml %>
            </div>
            <!-- make a table for just usd conversions -->
        </div>
    </div>
</div>
</body>
</html>
